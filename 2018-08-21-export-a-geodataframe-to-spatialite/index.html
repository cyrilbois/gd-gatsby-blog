<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/gd-gatsby-blog/0.6b1e0223630f2c045dda.css">@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/gd-gatsby-blog/static/montserrat-latin-100-50d279861fb3cbfed809eae6ed8b9ac9.woff2) format("woff2"),url(/gd-gatsby-blog/static/montserrat-latin-100-5e334eff013f12fbb8ed72c2a253f119.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/gd-gatsby-blog/static/montserrat-latin-100italic-8c0705336558194799a8729840d7ed9d.woff2) format("woff2"),url(/gd-gatsby-blog/static/montserrat-latin-100italic-03e19243272affe738654a157625ec26.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/gd-gatsby-blog/static/montserrat-latin-200-4343d3d91a9446226e7a8bbb024111ad.woff2) format("woff2"),url(/gd-gatsby-blog/static/montserrat-latin-200-f2022ecd65a0703ec3edcb7641709a75.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/gd-gatsby-blog/static/montserrat-latin-200italic-116c4c4b14ef76b0555da09854512022.woff2) format("woff2"),url(/gd-gatsby-blog/static/montserrat-latin-200italic-89614a6008fc5c60739012463d0ee7e6.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/gd-gatsby-blog/static/montserrat-latin-300-d2ad295b60682a6537c358e06ea80c61.woff2) format("woff2"),url(/gd-gatsby-blog/static/montserrat-latin-300-3a371ee0d175f5c2b15ce1d6b981dc4e.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/gd-gatsby-blog/static/montserrat-latin-300italic-f6b6bf2431003f8142e800f9df157989.woff2) format("woff2"),url(/gd-gatsby-blog/static/montserrat-latin-300italic-16521668f5f238098329cdd7d27c391e.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/gd-gatsby-blog/static/montserrat-latin-400-240a84447b78da0920fcb07e378f2c5f.woff2) format("woff2"),url(/gd-gatsby-blog/static/montserrat-latin-400-b20cc131034316b1c85d0498fb9ed5c5.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/gd-gatsby-blog/static/montserrat-latin-400italic-86172bb829de6be08b92512096b6aca6.woff2) format("woff2"),url(/gd-gatsby-blog/static/montserrat-latin-400italic-9405e78785a55cf0e4ea7669d4616ea9.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/gd-gatsby-blog/static/montserrat-latin-500-fb8d6b71dbe8d9294be43082936f649e.woff2) format("woff2"),url(/gd-gatsby-blog/static/montserrat-latin-500-50825d47af7ae47e055018eb689c6c99.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/gd-gatsby-blog/static/montserrat-latin-500italic-c0a555a4f8e997385a3eebbd4da0b9ee.woff2) format("woff2"),url(/gd-gatsby-blog/static/montserrat-latin-500italic-635de59c4be86285b1f70068c95b9816.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/gd-gatsby-blog/static/montserrat-latin-600-d5615136a08cfee70deb4be1ee1651df.woff2) format("woff2"),url(/gd-gatsby-blog/static/montserrat-latin-600-f300da4fb4fe00e23915f62b2c643681.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/gd-gatsby-blog/static/montserrat-latin-600italic-10f29d139edacde92df63374c5672568.woff2) format("woff2"),url(/gd-gatsby-blog/static/montserrat-latin-600italic-2bc37d86a4ba12ce526c4af904a9946e.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/gd-gatsby-blog/static/montserrat-latin-700-7d77e1f03eefc452dab14d7f89080083.woff2) format("woff2"),url(/gd-gatsby-blog/static/montserrat-latin-700-81826529772e52f0f14a4c73c2f2c7f1.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/gd-gatsby-blog/static/montserrat-latin-700italic-1dd2b53f1567a29e0505de9b27c4352c.woff2) format("woff2"),url(/gd-gatsby-blog/static/montserrat-latin-700italic-c162d257f5e9f9b108a96a604cfb2132.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/gd-gatsby-blog/static/montserrat-latin-800-d4e7bf86bbd8e5f43ca73fa831218648.woff2) format("woff2"),url(/gd-gatsby-blog/static/montserrat-latin-800-895aadbff357be35ac8dd107c7975ee7.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/gd-gatsby-blog/static/montserrat-latin-800italic-fc0cbe442f7b3733c91e982e825c4daa.woff2) format("woff2"),url(/gd-gatsby-blog/static/montserrat-latin-800italic-b3362875067300abedb7a8fb97903258.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:normal;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/gd-gatsby-blog/static/montserrat-latin-900-c8bdd772c0d1347720ff7e3fb72719f3.woff2) format("woff2"),url(/gd-gatsby-blog/static/montserrat-latin-900-1b99ef78e627dd9bbd0ca4b5c0789547.woff) format("woff")}@font-face{font-display:swap;font-family:Montserrat;font-style:italic;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/gd-gatsby-blog/static/montserrat-latin-900italic-cb72c1f90f66c124fb897a75bec64c78.woff2) format("woff2"),url(/gd-gatsby-blog/static/montserrat-latin-900italic-b78bb9f8ecec6c5a924c873f1818095f.woff) format("woff")}
@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/gd-gatsby-blog/static/merriweather-latin-300-f015f1e9a46a3b9db4fd64564dacece4.woff2) format("woff2"),url(/gd-gatsby-blog/static/merriweather-latin-300-92dfe81b725c342d31d962da975c07a6.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/gd-gatsby-blog/static/merriweather-latin-300italic-7fd86b32accf2df4403d1d4fa3a81502.woff2) format("woff2"),url(/gd-gatsby-blog/static/merriweather-latin-300italic-878b76f59d5ba58dd1652dc8d2a0f4f9.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/gd-gatsby-blog/static/merriweather-latin-400-12dbf4c00ae43698f278b099e4b0ec9e.woff2) format("woff2"),url(/gd-gatsby-blog/static/merriweather-latin-400-1fffad22b085a877995812dbf1d9ac08.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/gd-gatsby-blog/static/merriweather-latin-400italic-1e0d3e8121d88969bfb153c8f174b758.woff2) format("woff2"),url(/gd-gatsby-blog/static/merriweather-latin-400italic-de18d4c4e8e808a7248a185f866ff094.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/gd-gatsby-blog/static/merriweather-latin-700-dc8fec81a125fc63856587e6683da73b.woff2) format("woff2"),url(/gd-gatsby-blog/static/merriweather-latin-700-d7d2ed8e58f303392cc3fc00ba3a9186.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/gd-gatsby-blog/static/merriweather-latin-700italic-b7b7e5da4d7be8c12bd5a6c809edc8fc.woff2) format("woff2"),url(/gd-gatsby-blog/static/merriweather-latin-700italic-6210a5fc1c54ca85a5d82aa85d7a9b5c.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/gd-gatsby-blog/static/merriweather-latin-900-43f870d543dd89fbeb66d417c0d97276.woff2) format("woff2"),url(/gd-gatsby-blog/static/merriweather-latin-900-8f3806df74937c7b8b53f24ae1e725d1.woff) format("woff")}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/gd-gatsby-blog/static/merriweather-latin-900italic-168c1ab28ed0e4e7d654334def288bc1.woff2) format("woff2"),url(/gd-gatsby-blog/static/merriweather-latin-900italic-ae7778f01871e35ee142ef207b313b34.woff) format("woff")}

/*# sourceMappingURL=0.6b1e0223630f2c045dda.css.map*/</style><link rel="alternate" type="application/rss+xml" href="/gd-gatsby-blog/rss.xml"/><link rel="manifest" href="/gd-gatsby-blog/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><title data-react-helmet="true">Export a GeoDataFrame to Spatialite | Giacomo Debidda</title><meta data-react-helmet="true" name="description" content="I have been doing some geospatial analysis in the last few months, and since I came back from  GeoPython  in Basel (really good conference…"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#007acc;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}</style><link as="script" rel="preload" href="/gd-gatsby-blog/0-831e7a62b42b368c4d18.js"/><link as="script" rel="preload" href="/gd-gatsby-blog/component---src-templates-blog-post-js-fe2c0b84b9126b8f0b70.js"/><link as="script" rel="preload" href="/gd-gatsby-blog/app-2932d24488ee8310ae7a.js"/><link as="script" rel="preload" href="/gd-gatsby-blog/webpack-runtime-453b1bb8a8db13a4e0ef.js"/><link rel="preload" href="/gd-gatsby-blog/static/d/66/path---2018-08-21-export-a-geodataframe-to-spatialite-52-a-4b5-BJAA688clT7cW7szVLXieC8QxE.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;margin-bottom:-1.75rem"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/gd-gatsby-blog/">Giacomo Debidda</a></h3><h1>Export a GeoDataFrame to Spatialite</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.75rem">August 21, 2018</p><div><p>I have been doing some geospatial analysis in the last few months, and since I came back from <a href="http://2018.geopython.net/">GeoPython</a> in Basel (really good conference by the way, definitely recommended) I kept playing around with several Python libraries.</p>
<p>One of my favourite talks at the conference was by <a href="http://all-geo.org/volcan01010/">John A Stevenson</a>, a Scottish volcanologist.</p>
<p>Apart from the scans of his amazing field notebooks, beautifully filled with annotations and drawings, I was impressed by his technical expertise and passion for his work.</p>
<p>John mentioned that a common issue for researches that have to showcase their work at conferences is to deal with shapefiles. Instead of having to juggle with many different folders, files, and versions, he suggested to use a portable geospatial database. He mentioned two software solutions: <a href="https://cholmes.wordpress.com/2013/08/20/spatialite-and-geopackage/">Geopackage</a> and <a href="https://en.wikipedia.org/wiki/SpatiaLite">Spatialite</a>.</p>
<p>Given that I had already <a href="http://www.bostongis.com/PrinterFriendly.aspx?content_name=spatialite_tut01">heard about Spatialite</a>, I decided to try it.</p>
<p>In a <a href="https://github.com/jackdbd/aree-protette">toy project of mine</a> I used some shapefiles available on the <a href="http://dati.toscana.it/dataset">Open Data portal of Tuscany</a>. I loaded the shapefiles with <a href="http://geopandas.org/">GeoPandas</a>, performed some really simple geospatial analysis, and created a few maps with <a href="http://geoviews.org/">GeoViews</a> and <a href="https://scitools.org.uk/cartopy/docs/latest/index.html">Cartopy</a>. I decided to use Spatialite to export the geometries created by GeoPandas to a SQLite database.</p>
<p>The <code class="language-text">GeoPandas</code>’s <code class="language-text">GeoDataFrame</code> class inherits from <code class="language-text">Pandas</code>’s <code class="language-text">DataFrame</code>, so it has a <code class="language-text">to_sql()</code> method. I thought: <em>“I just have to call that method and pass the connection URI to my SQLite database, easy peasy!”</em>.</p>
<p>Well, <a href="https://github.com/geopandas/geopandas/issues/595">turns out</a> it wasn’t actually that easy… so I am writing this post to remember what I did.</p>
<h2>Install Spatialite</h2>
<p>Spatialite is actually a geospatial <em>extension</em> of SQLite, namely a set of functions that allow to store geospatial data in a SQLite database.</p>
<p>If you are on a Ubuntu-based distro, you can install Spatialite with:</p>
<div class="gatsby-highlight" data-language="sh"><pre class="language-sh"><code class="language-sh">sudo apt-get update
sudo apt-get install spatialite-bin</code></pre></div>
<h2>Check your geometries</h2>
<p>Check the geometry type of each row in the <code class="language-text">GeoDataFrame</code>. In my case, all geometries were of type <code class="language-text">Polygon</code>. I think that if you have mixed geometry types (e.g. <code class="language-text">Polygon</code> and <code class="language-text">MultiPolygon</code>) you have to use shapely methods (via GeoPandas) to convert them. Or maybe use different columns for different geometries that you want to store in the database.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token comment"># gdf is a GeoPandas DataFrame</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>gdf<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span><span class="token builtin">type</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> Polygon</code></pre></div>
<h2>Create a database table with no geospatial datatypes</h2>
<p>Even if you cannot use <code class="language-text">gdf.to_sql()</code> if you have some geospatial data, it’s fine if your <code class="language-text">GeoDataFrame</code> <strong>doesn’t actually contain geospatial data</strong> (so it’s basically just like any other Pandas <code class="language-text">DataFrame</code>).</p>
<p>Connect to your SQLite database and create a new table.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> os
<span class="token keyword">import</span> sqlite3

DB_PATH <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>os<span class="token punctuation">.</span>getcwd<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'your-database.db'</span><span class="token punctuation">)</span>
<span class="token comment"># Drop all geospatial data</span>
df <span class="token operator">=</span> gdf<span class="token punctuation">.</span>drop<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'geometry'</span><span class="token punctuation">,</span> <span class="token string">'AREA'</span><span class="token punctuation">,</span> <span class="token string">'PERIMETER'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token comment"># Create the table and populate it with non-geospatial datatypes</span>
<span class="token keyword">with</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>DB_PATH<span class="token punctuation">)</span> <span class="token keyword">as</span> conn<span class="token punctuation">:</span>
    df<span class="token punctuation">.</span>to_sql<span class="token punctuation">(</span><span class="token string">'your_table_name'</span><span class="token punctuation">,</span> conn<span class="token punctuation">,</span> if_exists<span class="token operator">=</span><span class="token string">'replace'</span><span class="token punctuation">,</span> index<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span></code></pre></div>
<p>Note: This is like any other “standard” export from a pandas DataFrame into a SQLite database table. There is no Spatialite functionality involved here. Not yet.</p>
<h2>Add a new column to store the geometry</h2>
<p>Now that you have your table, you can use the Spatialite extension to add a new table column to store your geometry (i.e. your geospatial data.</p>
<p>You might wonder: <em>why do I have to add this column now? Couldn’t I have added the column when I created the table?</em></p>
<p>According to the <a href="http://www.gaia-gis.it/gaia-sins/spatialite-cookbook/html/new-geom.html">Spatialite documentation</a>, you always must <em>first create the table</em>, then add the Geometry-column in a <em>second time and as a separate step</em>.</p>
<p>Another thing you have to is to load the Spatialite extension and to initialize your spatial metadata.</p>
<p>Let’s say that your geometry is a <code class="language-text">Polygon</code>, you want to use <a href="https://epsg.io/3857">EPSG:3857</a> as a projected coordinate system, and you want to name your column <code class="language-text">wkb_geometry</code> (see next step why this name). This is what you have to do:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">with</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>DB_PATH<span class="token punctuation">)</span> <span class="token keyword">as</span> conn<span class="token punctuation">:</span>
    conn<span class="token punctuation">.</span>enable_load_extension<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    conn<span class="token punctuation">.</span>load_extension<span class="token punctuation">(</span><span class="token string">"mod_spatialite"</span><span class="token punctuation">)</span>
    conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"SELECT InitSpatialMetaData(1);"</span><span class="token punctuation">)</span>
    conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>
        <span class="token triple-quoted-string string">"""
        SELECT AddGeometryColumn('your_table_name', 'wkb_geometry', 3857, 'POLYGON', 2);
        """</span>
    <span class="token punctuation">)</span></code></pre></div>
<p>So, to recap:</p>
<ul>
<li><code class="language-text">InitSpatialMetaData()</code> and <code class="language-text">AddGeometryColumn()</code> are functions from Spatialite, so you have to load it as a SQLite extension.</li>
<li><code class="language-text">InitSpatialMetaData()</code> must be called before attempting to call any other Spatial SQL function.</li>
<li>You just need to call <code class="language-text">InitSpatialMetaData()</code> once; calling it multiple times is useless but completely harmless.</li>
<li>First create the table, then add the Geometry-column as a separate step.</li>
</ul>
<h2>Convert each shapely geometry into a WKB representation</h2>
<p>SQLite 3 supports only a few <a href="https://www.sqlite.org/datatype3.html">storage classes (i.e. datatypes)</a>. You need to store your geospatial data as <a href="https://en.wikipedia.org/wiki/Binary_large_object">BLOB</a>.</p>
<p>GeoPandas stores geospatial data as shapely geometries, so you have to convert them somehow. Thanks to <a href="https://gis.stackexchange.com/a/141854/119309">this answer on GIS Stack Exchange</a> I found that the <code class="language-text">shapely.wkb</code> module provides <code class="language-text">dumps()</code> and <code class="language-text">loads()</code> functions that work almost exactly as their <code class="language-text">pickle</code> and <code class="language-text">simplejson</code> module counterparts. See <a href="http://toblerity.org/shapely/manual.html#well-known-formats">here</a> for details.</p>
<p>Each geometry in a GeoPandas <code class="language-text">GeoDataFrame</code> is a <code class="language-text">GeoSeries</code>. A <code class="language-text">GeoSeries</code> is basically a shapely geometry with some additional properties. This means that you can convert a geometry into a binary string with something like this:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">wkb <span class="token operator">=</span> swkb<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>gdf<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></code></pre></div>
<p>Since the database column is already there (until now it’s filled with <code class="language-text">NULL</code>), you have to use a SQL <code class="language-text">UPDATE SET</code> statement.</p>
<p>I wanted to use <code class="language-text">executemany</code> to perform a batch update, but in order to do that I also needed a <code class="language-text">WHERE</code> clause and an identifier to understand which table cell to update.</p>
<p>When you use <code class="language-text">executemany</code> you have to pass a tuple of tuples as a query parameter, so I prepared my data like this:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">import</span> shapely<span class="token punctuation">.</span>wkb <span class="token keyword">as</span> swkb

records <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token string">'some_id'</span><span class="token punctuation">:</span> gdf<span class="token punctuation">.</span>some_id<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'wkb'</span><span class="token punctuation">:</span> swkb<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>gdf<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span>  
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>gdf<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span></code></pre></div>
<p>As you can see, each shapely geometry has been converted into its own Well Known Binary representation.</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>gdf<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'shapely.geometry.polygon.Polygon'</span><span class="token operator">></span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>records<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'wkb'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">>></span><span class="token operator">></span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'bytes'</span><span class="token operator">></span></code></pre></div>
<h2>Populate the column with binary data</h2>
<p>One last step before populating the table is to create the tuple of tuples to use as a query parameter (because I’m doing a batch update with <code class="language-text">executemany</code>).</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python">tuples <span class="token operator">=</span> <span class="token builtin">tuple</span><span class="token punctuation">(</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span><span class="token string">'wkb'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">[</span><span class="token string">'some_id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">for</span> d <span class="token keyword">in</span> records<span class="token punctuation">)</span></code></pre></div>
<p>Finally, the batch update query:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">with</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>DB_PATH<span class="token punctuation">)</span> <span class="token keyword">as</span> conn<span class="token punctuation">:</span>
    conn<span class="token punctuation">.</span>enable_load_extension<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    conn<span class="token punctuation">.</span>load_extension<span class="token punctuation">(</span><span class="token string">"mod_spatialite"</span><span class="token punctuation">)</span>
    conn<span class="token punctuation">.</span>executemany<span class="token punctuation">(</span>
        <span class="token triple-quoted-string string">"""
        UPDATE your_table_name
        SET wkb_geometry=GeomFromWKB(?, 3857)
        WHERE your_table_name.some_id = ?
        """</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>tuples<span class="token punctuation">)</span>
    <span class="token punctuation">)</span></code></pre></div>
<h2>Double check that it worked</h2>
<p>There are several ways to double check that the database contains the right geospatial data.</p>
<p>You can perform a simple query:</p>
<div class="gatsby-highlight" data-language="python"><pre class="language-python"><code class="language-python"><span class="token keyword">with</span> sqlite3<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>DB_PATH<span class="token punctuation">)</span> <span class="token keyword">as</span> conn<span class="token punctuation">:</span>
    conn<span class="token punctuation">.</span>enable_load_extension<span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    conn<span class="token punctuation">.</span>load_extension<span class="token punctuation">(</span><span class="token string">"mod_spatialite"</span><span class="token punctuation">)</span>
    cur <span class="token operator">=</span> conn<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>
        <span class="token triple-quoted-string string">"""
        SELECT wkb_geometry FROM your_table_name
        """</span>
    <span class="token punctuation">)</span>
    results <span class="token operator">=</span> cur<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>
    
<span class="token keyword">print</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span></code></pre></div>
<p>or you can use a Spatialite viewer like <a href="https://www.gaia-gis.it/fossil/spatialite_gui/index">Spatialite GUI</a> and use its <em>Map Preview</em> feature.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/gd-gatsby-blog/static/spatialite-gui-b085bbd6d407a412a82db841325bdfac-2e281.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 78.7350054525627%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACfUlEQVQ4y3WT627aQBCFee28Tl6gfyLxCxRsg7GxMZeqKlKrcvONWxIMToINp3OWLAGlXWk0693xt3NmZyue56Hf71+s16P14HcD+e5hOBwiGAToDQboBrIeyFzFBiouYHx/oIzxFQIDCep2u/D9LjzxtuPAaNky78C0mqjbdZiy1mx3ULdaMG0HplFDo2HAcly0Oz4s2bOsBirPz89IVhtEUYz9fo9cbLfb4e3tFUmSSJCF6XgCV4CtVguBHEglgWRHTwVDyf67+IH4SrbN8Hp4RxiHCnQ6nVCWJTgWiwWazSbG47GCPT4+wnVdeJ6v5PZFJiG0c7lE8na7FcgR6TIF54QdDgcFTtMU7XZbQehN04Bt2x9zU81tu60OZe193z8DjwKczqdYLpcKpIGUzBrzR0Jd14EnP3U6HZUxs3KkFNyndMaegccScRojy3YyP6IoihugzpIQel5itVrF3d0dHh4e1Bqz+wBmKAVIyUVRKskaSMkayEwc8ZQ4Go3U2v39PQzDUBkz7jNDkTyP5ojj5AZ4LZltxVIwk1qthtlsdrk47jPrL8D5PPxnhvoHrrEkq9VKtRgH696U1uJBN5eSLqQPs62EnP4LJIx2PQinfC1b9WFZFqj9WOFbb4dok6M8vMkhZyBPvQZSNlVoMIHc/6xhluFYvOP3nxmGv0KMp3OsVPvgpoYE6vHy8nKZr9frr8CTADdpiEUSYzadIpHMKJmn8zL0pTw9PSkLw1DtEczLIYivhDGVTJ5bnr9iEUeYCCyKoksG9MyMNWJ78HXQ8303Gg31FDlnf9L4Yirr9QaTMMVP6S1KzCTjPM+V8QZ1wxKqTT+/629tfwFcnnmkKmXs/QAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Map Preview in Spatialite GUI"
        title="Map Preview in Spatialite GUI"
        src="/gd-gatsby-blog/static/spatialite-gui-b085bbd6d407a412a82db841325bdfac-fb8a0.png"
        srcset="/gd-gatsby-blog/static/spatialite-gui-b085bbd6d407a412a82db841325bdfac-1a291.png 148w,
/gd-gatsby-blog/static/spatialite-gui-b085bbd6d407a412a82db841325bdfac-2bc4a.png 295w,
/gd-gatsby-blog/static/spatialite-gui-b085bbd6d407a412a82db841325bdfac-fb8a0.png 590w,
/gd-gatsby-blog/static/spatialite-gui-b085bbd6d407a412a82db841325bdfac-526de.png 885w,
/gd-gatsby-blog/static/spatialite-gui-b085bbd6d407a412a82db841325bdfac-2e281.png 917w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<h2>Reference</h2>
<p><a href="https://github.com/jackdbd/aree-protette/blob/master/aree-protette.ipynb">Jupyter notebook</a> where I used Spatialite.</p>
<h2>Extra</h2>
<p><a href="https://twitter.com/jorisvdbossche">Joris Van den Bossche</a> and <a href="https://twitter.com/levijohnwolf">Levi John Wolf</a> also gave two excellent talks about GeoPandas, PySal, and geospatial analysis. Be sure to check out their tutorials <a href="https://github.com/jorisvandenbossche/geopandas-tutorial">here</a> and <a href="https://github.com/ljwolf/geopython">here</a>. The best thing is that you can run their notebooks with <a href="https://mybinder.org/">binder</a> without having to install anything on your machine!</p></div><hr style="margin-bottom:1.75rem"/><div class="sc-bdVaJa KZwod"><p><img src="/gd-gatsby-blog/static/profile-pic-a463b5971c9f7ac211fbe7bf4adb4a51.jpg" alt="Giacomo Debidda" style="float:left;margin-right:0.4375rem;margin-bottom:0;width:3.5rem;height:3.5rem"/>Written by <strong>Giacomo Debidda</strong>, Pythonista &amp; JS lover (D3, React). You can find me on <a href="https://twitter.com/jackdbd">Twitter</a> &amp;<!-- --> <a href="https://github.com/jackdbd">Github</a></p></div><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/gd-gatsby-blog/2018-01-07-jupyter-notebook-on-hdf5-h5py-pytables-datashader/">← <!-- -->Jupyter notebook on HDF5, h5py, PyTables, Datashader</a></li><li><a rel="next" href="/gd-gatsby-blog/2018-08-22-12-years-of-fires-in-sardinia/">12 Years of Fires in Sardinia<!-- --> →</a></li></ul></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"2018-08-21-export-a-geodataframe-to-spatialite-52a","path":"/2018-08-21-export-a-geodataframe-to-spatialite/"};window.dataPath="66/path---2018-08-21-export-a-geodataframe-to-spatialite-52-a-4b5-BJAA688clT7cW7szVLXieC8QxE";/*]]>*/</script><script src="/gd-gatsby-blog/webpack-runtime-453b1bb8a8db13a4e0ef.js" async=""></script><script src="/gd-gatsby-blog/app-2932d24488ee8310ae7a.js" async=""></script><script src="/gd-gatsby-blog/component---src-templates-blog-post-js-fe2c0b84b9126b8f0b70.js" async=""></script><script src="/gd-gatsby-blog/0-831e7a62b42b368c4d18.js" async=""></script></body></html>