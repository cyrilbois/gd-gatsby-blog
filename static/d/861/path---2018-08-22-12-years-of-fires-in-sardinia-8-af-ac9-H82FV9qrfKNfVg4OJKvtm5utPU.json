{"data":{"site":{"siteMetadata":{"title":"Giacomo Debidda","author":"Giacomo Debidda"}},"markdownRemark":{"id":"b2b9e476-55a9-5b5b-81da-af3589ec7426 >>> MarkdownRemark","excerpt":"This summer I was looking for some data visualization challenges and I came across  this cool project  by Mauro Melis. Mauro created it for…","html":"<p>This summer I was looking for some data visualization challenges and I came across <a href=\"https://mauromelis.gitlab.io/sardinia-on-fire/\">this cool project</a> by Mauro Melis. Mauro created it for a contest organized by <a href=\"http://contest.formez.it/\">Open Data Sardegna</a>, and the jury found it so cool that he won the first prize in the data visualization category.</p>\n<p>It’s basically a <a href=\"https://flowingdata.com/tag/scrollytelling/\">scrollytelling</a> visualization, a type of visualization popularized - among others - by <a href=\"https://www.nytimes.com/interactive/2016/12/07/world/asia/rodrigo-duterte-philippines-drugs-killings.html\">The New York Times</a> and the guys at <a href=\"https://pudding.cool/\">The Pudding</a>.</p>\n<p>There were no links to the data that Mauro used, but it was pretty easy to find the datasets from <a href=\"http://dati.regione.sardegna.it/dataset/cfva-perimetrazioni-aree-percorse-dal-fuoco-2005\">2005</a> to <a href=\"http://dati.regione.sardegna.it/dataset/cfva-perimetrazioni-aree-percorse-dal-fuoco-2016\">2016</a>, namely 12 years of wild fires in Sardinia.</p>\n<p>I like scrollytelling, but I wanted to do something quick this time. I also wanted to try an online tool (it’s also a library, but I used the online tool) developed by Uber: <a href=\"http://kepler.gl/#/\">Kepler.gl</a>.</p>\n<h2>Shapefiles? GeoPandas!</h2>\n<p>The datasets from 2005 to 2016 contain <a href=\"https://en.wikipedia.org/wiki/Shapefile\">shapefiles</a>, a popular geospatial vector data format. I know that there are several <a href=\"https://www.sitepoint.com/javascript-geospatial-advanced-maps/\">geospatial libraries in Javascript</a>, and of course <a href=\"https://medium.com/@mbostock/command-line-cartography-part-1-897aa8f8ca2c\">D3 is awesome for creating maps</a>, but I think that Python is so much better at data wrangling than Javascript, so I decided to go with it.</p>\n<p>In Python, if you need to work with data, you pick Pandas.</p>\n<p>If you need to work with Geospatial data, you pick GeoPandas.</p>\n<p>It’s that simple!</p>\n<h2>Not much Data Wrangling</h2>\n<p>Turns out that these datasets were actually pretty good, so I didn’t have to do too much data wrangling. Of course there were differences from year to year, but nothing major. As an example, this is what I did to clean the 2016 dataset:</p>\n<div class='aaaaaaa'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--source syntax--python\"><span class=\"syntax--keyword syntax--control syntax--import syntax--python\"><span>import</span></span><span>&nbsp;</span><span>os</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--python\"><span class=\"syntax--keyword syntax--control syntax--import syntax--python\"><span>import</span></span><span>&nbsp;</span><span>geopandas</span><span>&nbsp;</span><span class=\"syntax--keyword syntax--other syntax--python\"><span>as</span></span><span>&nbsp;</span><span>gpd</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--python\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--python\"><span>gdf2016</span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--assignment syntax--python\"><span>=</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--function-call syntax--python\"><span>gpd</span><span>.</span><span>read_file</span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python\"><span>(</span></span><span class=\"syntax--meta syntax--function-call syntax--arguments syntax--python\"><span class=\"syntax--meta syntax--function-call syntax--python\"><span>os</span><span>.</span><span>path</span><span>.</span><span>join</span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python\"><span>(</span></span><span class=\"syntax--meta syntax--function-call syntax--arguments syntax--python\"><span>data_dir</span><span>,&nbsp;</span><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>areeIncendiatePerim2016</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span><span>,&nbsp;</span><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>Perimetri_Superfici_Bruciate_2016.shp</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python\"><span>)</span></span></span></span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python\"><span>)</span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--python\"><span>gdf2016</span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--assignment syntax--python\"><span>=</span></span><span>&nbsp;</span><span>gdf2016</span><span class=\"syntax--punctuation syntax--separator syntax--continuation syntax--line syntax--python\"><span>\\</span></span><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--python\"><span>&nbsp;&nbsp;&nbsp;&nbsp;.</span><span class=\"syntax--meta syntax--function-call syntax--python\"><span>r</span><span>eset_index</span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python\"><span>(</span></span><span class=\"syntax--meta syntax--function-call syntax--arguments syntax--python\"><span class=\"syntax--variable syntax--parameter syntax--function syntax--python\"><span>drop</span></span><span class=\"syntax--keyword syntax--operator syntax--assignment syntax--python\"><span>=</span></span><span class=\"syntax--constant syntax--language syntax--python\"><span>True</span></span></span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python\"><span>)</span></span></span><span class=\"syntax--punctuation syntax--separator syntax--continuation syntax--line syntax--python\"><span>\\</span></span><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--python\"><span>&nbsp;&nbsp;&nbsp;&nbsp;.</span><span class=\"syntax--meta syntax--function-call syntax--python\"><span>d</span><span>rop</span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python\"><span>(</span></span><span class=\"syntax--meta syntax--function-call syntax--arguments syntax--python\"><span class=\"syntax--variable syntax--parameter syntax--function syntax--python\"><span>columns</span></span><span class=\"syntax--keyword syntax--operator syntax--assignment syntax--python\"><span>=</span></span><span class=\"syntax--meta syntax--structure syntax--list syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--list syntax--begin syntax--python\"><span>[</span></span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>BASE_FID</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>ID_INCE</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>ISTAT</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>ID_PROV</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>STIR</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>STAZIONE</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--python\"><span class=\"syntax--meta syntax--function-call syntax--python\"><span class=\"syntax--meta syntax--function-call syntax--arguments syntax--python\"><span class=\"syntax--meta syntax--structure syntax--list syntax--python\"><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>COMUNE</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>TIPOLOGIE</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>M2_BOSCO</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>M2_PASCOLO</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>M2_ALTRO</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>SUP_TOT_M2</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--python\"><span class=\"syntax--meta syntax--function-call syntax--python\"><span class=\"syntax--meta syntax--function-call syntax--arguments syntax--python\"><span class=\"syntax--meta syntax--structure syntax--list syntax--python\"><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>TIPO_INCE</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>dist_ins</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>ID_RILIEVO</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>MODIFICHE</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--definition syntax--list syntax--end syntax--python\"><span>]</span></span></span></span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python\"><span>)</span></span></span><span class=\"syntax--punctuation syntax--separator syntax--continuation syntax--line syntax--python\"><span>\\</span></span><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--python\"><span>&nbsp;&nbsp;&nbsp;&nbsp;.</span><span class=\"syntax--meta syntax--function-call syntax--python\"><span>r</span><span>ename</span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python\"><span>(</span></span><span class=\"syntax--meta syntax--function-call syntax--arguments syntax--python\"><span class=\"syntax--variable syntax--parameter syntax--function syntax--python\"><span>columns</span></span><span class=\"syntax--keyword syntax--operator syntax--assignment syntax--python\"><span>=</span></span><span class=\"syntax--meta syntax--structure syntax--dictionary syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--dictionary syntax--begin syntax--python\"><span>{</span></span><span class=\"syntax--meta syntax--structure syntax--dictionary syntax--key syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>TOPONIMO</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--valuepair syntax--dictionary syntax--python\"><span>:</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--dictionary syntax--value syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>toponym</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--dictionary syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--dictionary syntax--key syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>DATA_INCE</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--valuepair syntax--dictionary syntax--python\"><span>:</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--dictionary syntax--value syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>date</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--dictionary syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--dictionary syntax--key syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>N_INCE</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--valuepair syntax--dictionary syntax--python\"><span>:</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--dictionary syntax--value syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>num_fires</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--dictionary syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--dictionary syntax--key syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>SUP_TOT_HA</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--valuepair syntax--dictionary syntax--python\"><span>:</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--dictionary syntax--value syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>hectars</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--definition syntax--dictionary syntax--end syntax--python\"><span>}</span></span></span></span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python\"><span>)</span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--python\"><span>&nbsp;</span></span></div><div class=\"line\"><span class=\"syntax--source syntax--python\"><span>cols</span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--assignment syntax--python\"><span>=</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--list syntax--begin syntax--python\"><span>[</span></span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>toponym</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>hectars</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>date</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>num_fires</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>geometry</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--definition syntax--list syntax--end syntax--python\"><span>]</span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--python\"><span>gdf2016</span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--assignment syntax--python\"><span>=</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--item-access syntax--python\"><span>gdf2016</span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python\"><span>[</span></span><span class=\"syntax--meta syntax--item-access syntax--arguments syntax--python\"><span>cols</span></span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python\"><span>]</span></span></span></span></div></pre></div>\n<p>Basically I harmonized the datasets from 2005 to 2016, so they had the same structure.</p>\n<div class='aaaaaaa'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--source syntax--python\"><span class=\"syntax--meta syntax--function-call syntax--python\"><span>gdf2016</span><span>.</span><span>head</span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python\"><span>(</span></span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python\"><span>)</span></span></span></span></div></pre></div>\n<p><img src=\"./gdf-head.png\" alt=\"GeoFataFrame head() method\" title=\"gdf.head()\"></p>\n<p>Then I concatenated everything:</p>\n<div class='aaaaaaa'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--source syntax--python\"><span>gdf</span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--assignment syntax--python\"><span>=</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--function-call syntax--python\"><span>pd</span><span>.</span><span>concat</span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python\"><span>(</span></span><span class=\"syntax--meta syntax--function-call syntax--arguments syntax--python\"><span class=\"syntax--meta syntax--structure syntax--list syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--list syntax--begin syntax--python\"><span>[</span></span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span>gdf2005</span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span>gdf2006</span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span>gdf2007</span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--python\"><span class=\"syntax--meta syntax--function-call syntax--python\"><span class=\"syntax--meta syntax--function-call syntax--arguments syntax--python\"><span class=\"syntax--meta syntax--structure syntax--list syntax--python\"><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>gdf2008</span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span>gdf2009</span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span>gdf2010</span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--python\"><span class=\"syntax--meta syntax--function-call syntax--python\"><span class=\"syntax--meta syntax--function-call syntax--arguments syntax--python\"><span class=\"syntax--meta syntax--structure syntax--list syntax--python\"><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>gdf2011</span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span>gdf2012</span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span>gdf2013</span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span></span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--python\"><span class=\"syntax--meta syntax--function-call syntax--python\"><span class=\"syntax--meta syntax--function-call syntax--arguments syntax--python\"><span class=\"syntax--meta syntax--structure syntax--list syntax--python\"><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>gdf2014</span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span>gdf2015</span></span><span class=\"syntax--punctuation syntax--separator syntax--list syntax--python\"><span>,</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--structure syntax--list syntax--item syntax--python\"><span>gdf2016</span></span><span class=\"syntax--punctuation syntax--definition syntax--list syntax--end syntax--python\"><span>]</span></span></span></span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python\"><span>)</span></span></span></span></div></pre></div>\n<p>I experimented a little bit with <a href=\"http://geoviews.org/\">GeoViews</a> in a Jupyter notebook…</p>\n<p><img src=\"./experiments.png\" alt=\"Experiments with GeoViews\" title=\"Experiments with GeoViews\"></p>\n<h2>Simplify (after all, <a href=\"https://en.wikipedia.org/wiki/Ludwig_Mies_van_der_Rohe\">Less is More</a>)</h2>\n<p>I exported everything with:</p>\n<div class='aaaaaaa'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--source syntax--python\"><span class=\"syntax--meta syntax--function-call syntax--python\"><span>df</span><span>.</span><span>to_csv</span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python\"><span>(</span></span><span class=\"syntax--meta syntax--function-call syntax--arguments syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>sardinia_fires.csv</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python\"><span>)</span></span></span></span></div></pre></div>\n<p>While this worked, it resulted in a ~150MB CSV file. This is because I was including in the output the geometries of all the polygons. I uploaded the CSV file to Kepler.gl and it actually worked (well, I wasn’t exactly surprised given that Kepler was developed to visualize Uber’s data), but it took some time (I think ~10 minutes to upload).</p>\n<p>I explored the data in <a href=\"http://kepler.gl/#/demo\">Kepler.gl</a> for a couple of minutes. The vast majority of the wild fires in these datasets were quite small, so they looked like points. I decided to get rid of the <code class=\"language-text\">geometry</code> column in the <code class=\"language-text\">GeoDataFrame</code> and to export only the coordinates of the centroid of each polygon. This was super easy to do with GeoPandas:</p>\n<div class='aaaaaaa'><pre class=\"editor editor-colors\"><div class=\"line\"><span class=\"syntax--source syntax--python\"><span class=\"syntax--meta syntax--item-access syntax--python\"><span>gdf</span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python\"><span>[</span></span><span class=\"syntax--meta syntax--item-access syntax--arguments syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>CentroidLongitude</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python\"><span>]</span></span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--assignment syntax--python\"><span>=</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--item-access syntax--python\"><span>gdf</span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python\"><span>[</span></span><span class=\"syntax--meta syntax--item-access syntax--arguments syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>geometry</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python\"><span>]</span></span></span><span>.</span><span class=\"syntax--meta syntax--function-call syntax--python\"><span>a</span><span>pply</span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python\"><span>(</span></span><span class=\"syntax--meta syntax--function-call syntax--arguments syntax--python\"><span class=\"syntax--meta syntax--function syntax--inline syntax--python\"><span class=\"syntax--storage syntax--type syntax--function syntax--inline syntax--python\"><span>lambda</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--function syntax--inline syntax--parameters syntax--python\"><span class=\"syntax--variable syntax--parameter syntax--function syntax--python\"><span>poly</span></span></span><span class=\"syntax--punctuation syntax--definition syntax--parameters syntax--end syntax--python\"><span>:</span></span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--item-access syntax--python\"><span>poly</span><span>.</span><span>centroid</span><span>.</span><span>bounds</span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python\"><span>[</span></span><span class=\"syntax--meta syntax--item-access syntax--arguments syntax--python\"><span class=\"syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python\"><span>0</span></span></span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python\"><span>]</span></span></span></span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python\"><span>)</span></span></span></span></div><div class=\"line\"><span class=\"syntax--source syntax--python\"><span class=\"syntax--meta syntax--item-access syntax--python\"><span>gdf</span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python\"><span>[</span></span><span class=\"syntax--meta syntax--item-access syntax--arguments syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>CentroidLatitude</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python\"><span>]</span></span></span><span>&nbsp;</span><span class=\"syntax--keyword syntax--operator syntax--assignment syntax--python\"><span>=</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--item-access syntax--python\"><span>gdf</span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python\"><span>[</span></span><span class=\"syntax--meta syntax--item-access syntax--arguments syntax--python\"><span class=\"syntax--string syntax--quoted syntax--single syntax--single-line syntax--python\"><span class=\"syntax--punctuation syntax--definition syntax--string syntax--begin syntax--python\"><span>&#39;</span></span><span>geometry</span><span class=\"syntax--punctuation syntax--definition syntax--string syntax--end syntax--python\"><span>&#39;</span></span></span></span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python\"><span>]</span></span></span><span>.</span><span class=\"syntax--meta syntax--function-call syntax--python\"><span>a</span><span>pply</span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python\"><span>(</span></span><span class=\"syntax--meta syntax--function-call syntax--arguments syntax--python\"><span class=\"syntax--meta syntax--function syntax--inline syntax--python\"><span class=\"syntax--storage syntax--type syntax--function syntax--inline syntax--python\"><span>lambda</span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--function syntax--inline syntax--parameters syntax--python\"><span class=\"syntax--variable syntax--parameter syntax--function syntax--python\"><span>poly</span></span></span><span class=\"syntax--punctuation syntax--definition syntax--parameters syntax--end syntax--python\"><span>:</span></span></span><span>&nbsp;</span><span class=\"syntax--meta syntax--item-access syntax--python\"><span>poly</span><span>.</span><span>centroid</span><span>.</span><span>bounds</span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--begin syntax--python\"><span>[</span></span><span class=\"syntax--meta syntax--item-access syntax--arguments syntax--python\"><span class=\"syntax--constant syntax--numeric syntax--integer syntax--decimal syntax--python\"><span>1</span></span></span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python\"><span>]</span></span></span></span><span class=\"syntax--punctuation syntax--definition syntax--arguments syntax--end syntax--python\"><span>)</span></span></span></span></div></pre></div>\n<p>The resulting CSV file was obviously much smaller.</p>\n<p>I decided to use the following <a href=\"https://blog.qlik.com/visual-encoding\">visual encoding</a> for the points (well, circles):</p>\n<ul>\n<li>color correlates with number of fires (yellow = less fires; purple = more fires)</li>\n<li>size correlates with area (in hectares).</li>\n</ul>\n<h2>Success!</h2>\n<p>I took a screenshot:</p>\n<p><img src=\"./sardinia-fires.png\" alt=\"12 Years of fire in Sardinia, screenshot\" title=\"12 Years of fire in Sardinia\"></p>\n<p>and an animated GIF (I recorded it with <a href=\"https://github.com/phw/peek\">Peek</a>, a really amazing tool):</p>\n<p><img src=\"./sardinia-fires.gif\" alt=\"12 Years of fire in Sardinia, GIF\" title=\"12 Years of fire in Sardinia\"></p>\n<p>I posted it on the <a href=\"https://www.reddit.com/r/dataisbeautiful/comments/8z1i0p/12_years_of_fires_in_sardinia_20052016_oc/\">DataIsBeautiful subreddit</a> and it was quite succesfull.</p>\n<p>Someone commented that I should have added a legend, and I agree, but apparently I was too lazy to find out how to add it in Kepler.gl.</p>\n<p>Other projects where I had to do much more data wrangling had been completely ignored.</p>\n<p>Lessons learned:</p>\n<ul>\n<li>Nobody cares about how much you struggled with data wrangling (but you still have to do it).</li>\n<li>Always include a GIF in a README (well, I already knew that…)</li>\n<li>Sardinian cities keep their Italian name in English</li>\n</ul>\n<h2>Code</h2>\n<p>You can find the <a href=\"https://github.com/jackdbd/sardinia-fires\">repository on GitHub</a>.</p>\n<h2>A Note on Reproducibilty</h2>\n<p>I recently tried to reproduce the notebook and I had to exclude the dataset from 2010. I think this is due to some dependency issues with <a href=\"https://macwright.org/2012/10/31/gis-with-python-shapely-fiona.html\">fiona</a>, which is used by GeoPandas.</p>","frontmatter":{"title":"12 Years of Fires in Sardinia","date":"August 22, 2018"}}},"pageContext":{"slug":"/2018-08-22-12-years-of-fires-in-sardinia/","previous":{"fields":{"slug":"/2018-08-21-export-a-geodataframe-to-spatialite/"},"frontmatter":{"title":"Export a GeoDataFrame to Spatialite"}},"next":null}}